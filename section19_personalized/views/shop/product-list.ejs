<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/product.css">
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>

            <main class="container">
                <h1>Product List</h1>
                <% if (prods.length > 0) {
                    for (let i = 0; i < prods.length; i++) {
                        const product = prods[i];
                        if (i % 3 === 0) { %>
                        <div class="row">
                        <% } %>

                        <div class="card col-sm-6 col-md-4">
                            <h5 class="card-title">
                                <%= product.title %>
                            </h5>
                            <img class="card-img" src="<%= product.imageUrl %>" alt="<%= product.title %>">
                            <div class="card-body">
                                <div class="card-text">
                                    <h2>$
                                        <%= product.price %>
                                    </h2>
                                </div>
                                <div>
                                    <a href="/products/<%= product._id %>" class="btn btn-primary product-action-1">Details</a>
                                    <% if (isAuthenticated) { %>
                                        <%- include('../includes/add-to-cart.ejs', {product: product}) %>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        
                        <%  if ((i + 1) % 3 === 0) { %>
                        </div>
                        <% }
                    }
                } else { %>
                    <h1>No Products Found!</h1>
                <% } %>
            </main>
            <%- include('../includes/end.ejs') %>